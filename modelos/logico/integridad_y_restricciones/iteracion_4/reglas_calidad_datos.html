<html><head><style>body {
   color: black;
}
</style></head><body><h1 id="integridad-referencial-y-restricciones-sem-nticas">INTEGRIDAD REFERENCIAL Y RESTRICCIONES SEMÃNTICAS</h1>
<h2 id="modelo-l-gico-bici-go-v4-0-rol-dise-ador-l-gico">Modelo LÃ³gico BICI-GO v4.0 â€“ Rol: DiseÃ±ador LÃ³gico</h2>
<hr>
<h3 id="-parte-1-unicidad">ğŸ§± PARTE 1. UNICIDAD</h3>
<p>En esta secciÃ³n se definen las restricciones de <strong>unicidad y claves</strong> aplicables al modelo lÃ³gico.<br>Estas reglas garantizan la integridad estructural y evitan la duplicidad de registros en las entidades principales.  </p>
<p><br></p>
<table>
<tr><th>Tabla</th><th>Campo(s)</th><th>RestricciÃ³n</th><th>Prioridad</th><th>DescripciÃ³n</th></tr>

<tr>
<td><b>pais</b></td>
<td>nombre</td>
<td>UNIQUE</td>
<td>ğŸŸ¢</td>
<td>Cada paÃ­s se registra una Ãºnica vez, evitando la duplicaciÃ³n de nombres en la tabla <b>pais</b>.</td>
</tr>

<tr>
<td><b>ciudad</b></td>
<td>(nombre, id_pais)</td>
<td>UNIQUE</td>
<td>ğŸŸ¢</td>
<td>El nombre de una ciudad no puede repetirse dentro del mismo paÃ­s. Sin embargo, puede existir en diferentes paÃ­ses.</td>
</tr>

<tr>
<td><b>punto_alquiler</b></td>
<td>nombre</td>
<td>UNIQUE</td>
<td>ğŸŸ¡</td>
<td>Garantiza que cada punto de alquiler tenga un nombre Ãºnico en el sistema BICI-GO.</td>
</tr>

<tr>
<td><b>usuario</b></td>
<td>correo</td>
<td>UNIQUE</td>
<td>ğŸ”´</td>
<td>El correo electrÃ³nico es el identificador Ãºnico de cada usuario registrado.</td>
</tr>

<tr>
<td><b>empleado</b></td>
<td>documento_identidad</td>
<td>UNIQUE</td>
<td>ğŸ”´</td>
<td>Evita la duplicidad de empleados mediante su nÃºmero de documento.</td>
</tr>

<tr>
<td><b>bicicleta</b></td>
<td>serial_unico</td>
<td>UNIQUE</td>
<td>ğŸ”´</td>
<td>Cada bicicleta posee un nÃºmero de serie Ãºnico que la identifica fÃ­sicamente en el sistema.</td>
</tr>

<tr>
<td><b>capacidad_tipo</b></td>
<td>nombre</td>
<td>UNIQUE</td>
<td>ğŸŸ¢</td>
<td>Define un Ãºnico nombre para cada tipo de capacidad (por ejemplo, â€œEstacionamientoâ€, â€œTallerâ€, â€œCargador elÃ©ctricoâ€).</td>
</tr>

<tr>
<td><b>punto_servicio</b></td>
<td>(nombre, id_punto_alquiler)</td>
<td>UNIQUE</td>
<td>ğŸŸ¡</td>
<td>Permite identificar de forma exclusiva cada tipo de servicio dentro de un punto de alquiler especÃ­fico.</td>
</tr>

<tr>
<td><b>horario_base</b></td>
<td>nombre</td>
<td>UNIQUE</td>
<td>ğŸŸ¢</td>
<td>Establece que cada horario base registrado tenga un nombre Ãºnico para facilitar su reutilizaciÃ³n en diferentes puntos o servicios.</td>
</tr>

</table>

<hr>
<h3 id="-parte-2-integridad-referencial">ğŸ”— PARTE 2. INTEGRIDAD REFERENCIAL</h3>
<p>En esta secciÃ³n se describen las <strong>relaciones entre tablas</strong> mediante llaves forÃ¡neas, con el fin de mantener la coherencia de los datos a lo largo del modelo lÃ³gico.  </p>
<p>Cada relaciÃ³n define la cardinalidad y las reglas de actualizaciÃ³n o eliminaciÃ³n asociadas.</p>
<p><br></p>
<table>
<tr><th>Tabla origen</th><th>Campo FK</th><th>Tabla destino</th><th>Regla</th><th>Prioridad</th><th>DescripciÃ³n</th></tr>

<tr>
<td><b>ciudad</b></td>
<td>id_pais</td>
<td>pais</td>
<td>ON DELETE RESTRICT</td>
<td>ğŸŸ¢</td>
<td>Una ciudad no puede existir sin un paÃ­s asociado. No se permite eliminar un paÃ­s con ciudades activas.</td>
</tr>

<tr>
<td><b>punto_alquiler</b></td>
<td>id_ciudad</td>
<td>ciudad</td>
<td>ON DELETE CASCADE</td>
<td>ğŸŸ¡</td>
<td>Si una ciudad es eliminada, se eliminan tambiÃ©n sus puntos de alquiler asociados.</td>
</tr>

<tr>
<td><b>punto_servicio</b></td>
<td>id_punto_alquiler</td>
<td>punto_alquiler</td>
<td>ON DELETE CASCADE</td>
<td>ğŸŸ¡</td>
<td>Elimina los servicios asociados al punto si este se elimina.</td>
</tr>

<tr>
<td><b>capacidad</b></td>
<td>id_punto_servicio</td>
<td>punto_servicio</td>
<td>ON DELETE CASCADE</td>
<td>ğŸŸ¢</td>
<td>La capacidad estÃ¡ directamente vinculada al servicio dentro del punto. Si el servicio se borra, la capacidad tambiÃ©n.</td>
</tr>

<tr>
<td><b>capacidad</b></td>
<td>id_capacidad_tipo</td>
<td>capacidad_tipo</td>
<td>ON DELETE RESTRICT</td>
<td>ğŸŸ¢</td>
<td>No puede eliminarse un tipo de capacidad si existen registros de capacidad que lo referencien.</td>
</tr>

<tr>
<td><b>bicicleta</b></td>
<td>id_punto_alquiler_actual</td>
<td>punto_alquiler</td>
<td>ON DELETE SET NULL</td>
<td>ğŸŸ¡</td>
<td>Permite que una bicicleta quede â€œsin punto asignadoâ€ si su punto actual es eliminado (en mantenimiento o traslado).</td>
</tr>

<tr>
<td><b>empleado</b></td>
<td>id_punto_alquiler</td>
<td>punto_alquiler</td>
<td>ON DELETE SET NULL</td>
<td>ğŸŸ¡</td>
<td>Si el punto donde trabaja un empleado es eliminado, su referencia se anula, pero el registro del empleado se conserva.</td>
</tr>

<tr>
<td><b>alquiler</b></td>
<td>(id_usuario, id_bicicleta, id_punto_origen, id_punto_destino)</td>
<td>usuario, bicicleta, punto_alquiler</td>
<td>ON DELETE RESTRICT</td>
<td>ğŸ”´</td>
<td>Garantiza la integridad de los datos de cada alquiler: usuario, bicicleta y puntos deben existir.</td>
</tr>

<tr>
<td><b>detalle_dia_horario</b></td>
<td>id_horario_base</td>
<td>horario_base</td>
<td>ON DELETE CASCADE</td>
<td>ğŸŸ¢</td>
<td>Si se elimina un horario base, se eliminan todos los detalles de dÃ­as asociados a Ã©l.</td>
</tr>

<tr>
<td><b>excepcion_horario</b></td>
<td>id_horario_base</td>
<td>horario_base</td>
<td>ON DELETE CASCADE</td>
<td>ğŸŸ¢</td>
<td>Controla excepciones de horarios (festivos o cierres especiales) asociadas a un horario base determinado.</td>
</tr>

<tr>
<td><b>mantenimiento</b></td>
<td>(id_empleado, id_bicicleta)</td>
<td>empleado, bicicleta</td>
<td>ON DELETE RESTRICT</td>
<td>ğŸ”´</td>
<td>Impide eliminar empleados o bicicletas con mantenimientos registrados en el historial.</td>
</tr>

</table>

<hr>
<h3 id="-parte-3-integridad-sem-ntica-general">âš™ï¸ PARTE 3. INTEGRIDAD SEMÃNTICA GENERAL</h3>
<p>Las restricciones semÃ¡nticas complementan la integridad estructural mediante <strong>reglas de negocio</strong> expresadas sobre los valores permitidos en los atributos.<br>Estas reglas reflejan el comportamiento operativo y los lÃ­mites vÃ¡lidos de los datos.</p>
<p><br></p>
<table>
<tr><th>Tabla</th><th>Campo(s)</th><th>CondiciÃ³n</th><th>Prioridad</th><th>DescripciÃ³n</th></tr>

<tr>
<td><b>usuario</b></td>
<td>edad</td>
<td>&gt;= 14</td>
<td>ğŸ”´</td>
<td>Los usuarios deben tener al menos 14 aÃ±os para registrarse en el sistema de alquiler BICI-GO.</td>
</tr>

<tr>
<td><b>bicicleta</b></td>
<td>estado</td>
<td>IN (â€˜disponibleâ€™, â€˜en usoâ€™, â€˜en mantenimientoâ€™, â€˜retiradaâ€™)</td>
<td>ğŸ”´</td>
<td>El estado de la bicicleta debe estar dentro de los valores controlados establecidos por el sistema.</td>
</tr>

<tr>
<td><b>punto_alquiler</b></td>
<td>capacidad_total</td>
<td>&gt;= 0</td>
<td>ğŸŸ¢</td>
<td>Evita valores negativos en la capacidad total de bicicletas que puede manejar un punto de alquiler.</td>
</tr>

<tr>
<td><b>capacidad</b></td>
<td>cantidad_disponible</td>
<td>&gt;= 0 AND cantidad_disponible &lt;= cantidad_maxima</td>
<td>ğŸ”´</td>
<td>Garantiza que las unidades disponibles no excedan la capacidad mÃ¡xima asignada para el servicio o tipo de espacio.</td>
</tr>

<tr>
<td><b>horario_base</b></td>
<td>hora_inicio, hora_fin</td>
<td>hora_inicio &lt; hora_fin</td>
<td>ğŸŸ¢</td>
<td>Verifica que la hora de inicio sea anterior a la hora de fin para mantener coherencia temporal.</td>
</tr>

<tr>
<td><b>detalle_dia_horario</b></td>
<td>dia_semana</td>
<td>IN (1â€“7)</td>
<td>ğŸŸ¢</td>
<td>Solo se permiten valores de 1 a 7, representando los dÃ­as de lunes a domingo.</td>
</tr>

<tr>
<td><b>excepcion_horario</b></td>
<td>fecha_excepcion</td>
<td>UNIQUE por horario_base</td>
<td>ğŸŸ¡</td>
<td>No pueden existir dos excepciones para la misma fecha dentro de un mismo horario base.</td>
</tr>

<tr>
<td><b>mantenimiento</b></td>
<td>fecha_fin</td>
<td>NULL o fecha_fin &gt;= fecha_inicio</td>
<td>ğŸŸ¢</td>
<td>La fecha de finalizaciÃ³n debe ser posterior o igual a la fecha de inicio. Puede ser nula mientras el mantenimiento estÃ© en curso.</td>
</tr>

</table>

<hr>
<h3 id="-parte-4-reglas-de-negocio">ğŸ§® PARTE 4. REGLAS DE NEGOCIO</h3>
<p>Estas reglas complementan la integridad semÃ¡ntica y expresan la <strong>lÃ³gica funcional</strong> del sistema BICI-GO,<br>asegurando que los procesos de registro, alquiler, mantenimiento y operaciÃ³n cumplan los criterios establecidos.</p>
<p><br></p>
<table>
<tr><th>ID Regla</th><th>Nombre</th><th>CondiciÃ³n / DescripciÃ³n</th><th>Impacto</th><th>Prioridad</th></tr>

<tr>
<td>RN-01</td>
<td>Disponibilidad de bicicleta</td>
<td>Una bicicleta solo puede alquilarse si su estado = &#39;disponible&#39; y se encuentra asociada a un punto de alquiler activo.</td>
<td>Control de flujo de alquileres</td>
<td>ğŸ”´</td>
</tr>

<tr>
<td>RN-02</td>
<td>VerificaciÃ³n de capacidad</td>
<td>Antes de permitir el registro de un nuevo alquiler o devoluciÃ³n, debe verificarse que la capacidad del punto de destino sea &gt; 0.</td>
<td>Previene saturaciÃ³n de puntos</td>
<td>ğŸ”´</td>
</tr>

<tr>
<td>RN-03</td>
<td>RestricciÃ³n por horario</td>
<td>No se permite iniciar ni finalizar alquileres fuera del horario operativo definido en <b>detalle_dia_horario</b>.</td>
<td>Control operacional</td>
<td>ğŸŸ¡</td>
</tr>

<tr>
<td>RN-04</td>
<td>Mantenimiento preventivo</td>
<td>Si los valores de <b>uso_acumulado</b> (km o horas) superan el umbral de <b>parametro_mantenimiento</b>, la bicicleta pasa automÃ¡ticamente a estado = â€˜en mantenimientoâ€™.</td>
<td>Seguridad y durabilidad</td>
<td>ğŸ”´</td>
</tr>

<tr>
<td>RN-05</td>
<td>AsignaciÃ³n de etiquetas</td>
<td>Una bicicleta puede tener mÃºltiples etiquetas activas, pero no se pueden duplicar combinaciones de (id_bicicleta, id_etiqueta, fecha_asignacion).</td>
<td>Consistencia informativa</td>
<td>ğŸŸ¢</td>
</tr>

<tr>
<td>RN-06</td>
<td>Tarifa vigente</td>
<td>Solo puede existir una tarifa activa (fecha_fin IS NULL) por combinaciÃ³n de <b>id_plan</b> y <b>id_bicicleta</b>.</td>
<td>Control de precios</td>
<td>ğŸ”´</td>
</tr>

<tr>
<td>RN-07</td>
<td>Seguro activo</td>
<td>Una bicicleta puede tener varias coberturas, pero solo una por tipo con estado = â€˜activoâ€™.</td>
<td>GestiÃ³n de seguros</td>
<td>ğŸŸ¡</td>
</tr>

<tr>
<td>RN-08</td>
<td>Registro de administrador</td>
<td>Todo registro de modificaciÃ³n (insert/update/delete) debe asociarse a un <b>id_admin</b> vÃ¡lido en el sistema.</td>
<td>Trazabilidad de acciones</td>
<td>ğŸ”´</td>
</tr>

<tr>
<td>RN-09</td>
<td>Vigencia de horarios</td>
<td>Las excepciones o horarios especiales no pueden solaparse con el horario base en las mismas fechas.</td>
<td>Control temporal</td>
<td>ğŸŸ¢</td>
</tr>

<tr>
<td>RN-10</td>
<td>Control de integridad fÃ­sica</td>
<td>El estado fÃ­sico (â€˜daÃ±adaâ€™, â€˜en revisiÃ³nâ€™, etc.) debe actualizarse cada vez que una bicicleta cambia de estado operativo.</td>
<td>GestiÃ³n tÃ©cnica</td>
<td>ğŸŸ¡</td>
</tr>

</table>

<hr>
<h3 id="-parte-5-seguridad-l-gica">ğŸ”’ PARTE 5. SEGURIDAD LÃ“GICA</h3>
<p>Estas restricciones establecen el control de acceso y acciones permitidas por tipo de usuario o rol dentro del sistema.</p>
<p><br></p>
<table>
<tr><th>Rol</th><th>Permisos principales</th><th>Restricciones</th><th>Observaciones</th></tr>

<tr>
<td><b>Administrador</b></td>
<td>Insert, Update, Delete, Select</td>
<td>Ninguna</td>
<td>Control total sobre todas las entidades, responsable de trazabilidad (<b>id_admin</b>).</td>
</tr>

<tr>
<td><b>Operador</b></td>
<td>Insert, Update, Select</td>
<td>No puede eliminar registros crÃ­ticos (bicicleta, plan, tarifa).</td>
<td>Gestiona alquileres, mantenimiento y disponibilidad en puntos de alquiler.</td>
</tr>

<tr>
<td><b>Usuario</b></td>
<td>Select, Insert</td>
<td>No puede modificar ni eliminar datos maestros.</td>
<td>Solo puede iniciar alquileres, consultar planes y registrar devoluciones.</td>
</tr>

<tr>
<td><b>TÃ©cnico de mantenimiento</b></td>
<td>Insert, Update</td>
<td>No puede modificar datos de usuarios ni de tarifas.</td>
<td>Se limita a registrar mantenimientos y estados operativos o fÃ­sicos.</td>
</tr>

<tr>
<td><b>Auditor</b></td>
<td>Select</td>
<td>No puede modificar datos.</td>
<td>Accede a vistas consolidadas del sistema para control de gestiÃ³n y trazabilidad.</td>
</tr>

</table>

<hr>
<h3 id="-parte-6-observaciones-finales">ğŸ§¾ PARTE 6. OBSERVACIONES FINALES</h3>
<ol>
<li>Todas las entidades que incluyen el campo <strong><code>id_admin</code></strong> deben mantener una relaciÃ³n de trazabilidad con el administrador responsable de la acciÃ³n.  </li>
<li>Los campos de tipo <strong>fecha</strong> y <strong>hora</strong> utilizan la convenciÃ³n <strong>UTC-5 (BogotÃ¡)</strong>, y los valores por defecto siguen los registros del servidor.  </li>
<li>Los <strong>campos de auditorÃ­a</strong> (<code>fecha_creacion</code>, <code>fecha_actualizacion</code>, <code>fecha_inicio</code>, <code>fecha_fin</code>) son obligatorios para entidades de tipo histÃ³rico o de control.  </li>
<li>El sistema debe soportar <strong>transacciones atÃ³micas</strong>, garantizando la consistencia ante fallas o interrupciones.  </li>
<li>Los <strong>valores enumerados</strong> (como estados, tipos o condiciones) deben implementarse con <strong>CHECK constraints</strong> o mediante <strong>tablas de referencia</strong>, segÃºn el motor de base de datos.  </li>
<li>Los <strong>Ã­ndices compuestos</strong> se recomiendan en campos utilizados frecuentemente para bÃºsquedas o validaciones (ej. <code>(id_pais, nombre_ciudad)</code>, <code>(id_plan, id_bicicleta)</code>).</li>
</ol>
<hr>
<h3 id="-conclusi-n">ğŸ“˜ ConclusiÃ³n</h3>
<p>El modelo lÃ³gico BICI-GO v4.0 consolida la estructura referencial y semÃ¡ntica del sistema,<br>integrando mecanismos de control, trazabilidad y consistencia de datos.<br>Su diseÃ±o soporta la expansiÃ³n futura de servicios, coberturas y tipos de uso,<br>manteniendo la integridad relacional y las normas de calidad de datos exigidas en sistemas distribuidos.</p>
<hr>
<blockquote>
<p><strong>VersiÃ³n:</strong> 4.0<br><strong>Rol responsable:</strong> DiseÃ±ador LÃ³gico<br><strong>Sistema:</strong> BICI-GO<br><strong>ActualizaciÃ³n:</strong> Noviembre de 2025  </p>
</blockquote>
</body></html>