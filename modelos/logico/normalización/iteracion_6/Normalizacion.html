<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>An√°lisis de Normalizaci√≥n - Sistema BICI-GO v6.0</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background:#f9f9f9; color:#222; }
    h1, h2, h3 { color: #003366; }
    table { border-collapse: collapse; width: 100%; margin-bottom: 20px; }
    th, td { border: 1px solid #999; padding: 8px; text-align: left; vertical-align: top; }
    th { background-color: #cce5ff; color: #004085; }
    tr:nth-child(even) { background-color: #e9f0fb; }
    hr { border: 0; border-top: 2px solid #ccc; margin: 30px 0; }
    code { background: #eef; padding: 0 3px; }
  </style>
</head>
<body>
<h1>AN√ÅLISIS DE NORMALIZACI√ìN - FORMAS NORMALES</h1>
<h2>Sistema BICI-GO v6.0 | Rol: Dise√±ador L√≥gico</h2>
<hr>

<h2>PARTE 1: DECISIONES DE NORMALIZACI√ìN - 1FN</h2>
<h3>Primera Forma Normal (1FN): Sin atributos multivaluados o compuestos</h3>
<table>
  <thead>
    <tr><th>Decisi√≥n</th><th>Tabla Afectada</th><th>Justificaci√≥n</th><th>Alternativa Rechazada</th></tr>
  </thead>
  <tbody>
    <tr>
      <td>Separar resoluci√≥n en ancho/alto</td>
      <td>fotografia</td>
      <td>Evita atributo compuesto ‚Äú1920x1080‚Äù; valida dimensiones por separado</td>
      <td>Usar VARCHAR combinado</td>
    </tr>
    <tr>
      <td>Atributos at√≥micos en persona</td>
      <td>persona</td>
      <td><code>notificacion_push</code> y <code>notificacion_email</code> como flags o enumeraciones at√≥micas; evita arrays</td>
      <td>JSON/arrays para preferencias</td>
    </tr>
    <tr>
      <td>Idiomas como cat√°logo separado</td>
      <td>idioma</td>
      <td>Evita multivaluados al asignar m√∫ltiples idiomas v√≠a tabla asociativa</td>
      <td>Lista de idiomas en texto libre</td>
    </tr>
    <tr>
      <td>Relaciones M:N temporales</td>
      <td>guia_idioma, guia_ruta, bicicleta_etiqueta</td>
      <td>Persistir asignaciones m√∫ltiples como filas, no como listas en una columna</td>
      <td>Campos multivaluados en gu√≠a o ruta</td>
    </tr>
    <tr>
      <td>Separar contenido legal y su referencia</td>
      <td>terminos_condiciones, persona</td>
      <td>Texto legal en tabla dedicada y referencia por FK; evita duplicaci√≥n del texto por persona</td>
      <td>Almacenar texto legal por persona</td>
    </tr>
  </tbody>
</table>

<hr>
<h2>PARTE 2: DECISIONES DE NORMALIZACI√ìN - 2FN</h2>
<h3>Segunda Forma Normal (2FN): Sin dependencias parciales</h3>
<table>
  <thead>
    <tr><th>Decisi√≥n</th><th>Tabla Afectada</th><th>Justificaci√≥n</th><th>Beneficio</th></tr>
  </thead>
  <tbody>
    <tr>
      <td>PK sustitutas y claves naturales</td>
      <td>bicicleta</td>
      <td><code>id_bicicleta</code> como PK; <code>codigo_unico</code> como clave natural</td>
      <td>Evita dependencias parciales y facilita referenciaci√≥n</td>
    </tr>
    <tr>
      <td>Separaci√≥n de roles</td>
      <td>persona, cliente, administrador, guia_turistico</td>
      <td>Evita mezclar atributos de distintos roles en una sola entidad</td>
      <td>Flexibilidad en evoluci√≥n de cada rol</td>
    </tr>
    <tr>
      <td>Cat√°logos independientes</td>
      <td>idioma, tipo_uso, tipo_asistencia, tipo_cobertura, servicio, metodo_de_pago</td>
      <td>Elimina redundancia en transaccionales</td>
      <td>Claridad y reutilizaci√≥n</td>
    </tr>
    <tr>
      <td>Ruta como entidad independiente</td>
      <td>ruta_turistica</td>
      <td>Atributos propios y referenciaci√≥n desde rese√±as y asignaciones</td>
      <td>Evita dependencias parciales en rese√±as/asignaciones</td>
    </tr>
  </tbody>
</table>

<hr>
<h2>PARTE 3: DECISIONES DE NORMALIZACI√ìN - 3FN</h2>
<h3>Tercera Forma Normal (3FN): Sin dependencias transitivas</h3>
<table>
  <thead>
    <tr><th>Decisi√≥n</th><th>Tabla Afectada</th><th>Justificaci√≥n</th><th>Eliminada</th></tr>
  </thead>
  <tbody>
    <tr>
      <td>Separar rese√±as de reservas y rutas</td>
      <td>resenia_ruta</td>
      <td>Evita transitivas entre atributos de reserva y ruta en una entidad mixta</td>
      <td>Dependencia reserva ‚Üí ruta ‚Üí calificaci√≥n</td>
    </tr>
    <tr>
      <td>Texto legal y aceptaci√≥n</td>
      <td>terminos_condiciones, persona</td>
      <td>La persona referencia la versi√≥n; evita transiciones de texto legal en persona</td>
      <td>Dependencia transitiva persona ‚Üí versi√≥n ‚Üí contenido</td>
    </tr>
    <tr>
      <td>Trazabilidad con <code>id_admin</code></td>
      <td>cobertura_seguro, condiciones_especiales, bicicleta, punto_alquiler, etc.</td>
      <td>Auditor√≠a independiente de usuarios/roles</td>
      <td>Dependencia transitiva con usuario/operador</td>
    </tr>
    <tr>
      <td>Separar descuentos y su aplicaci√≥n</td>
      <td>descuento, reserva_descuento</td>
      <td>Evita transitiva en <code>reserva</code> y permite m√∫ltiples aplicaciones</td>
      <td>Descuento embebido en reserva</td>
    </tr>
    <tr>
      <td>Uso acumulado separado</td>
      <td>uso_acumulado</td>
      <td>Evita transitivas en atributos de bicicleta; agrupa m√©tricas</td>
      <td>Dependencia bicicleta ‚Üí m√©tricas ‚Üí umbrales</td>
    </tr>
  </tbody>
</table>

<hr>
<h2>PARTE 4: DECISIONES DE NORMALIZACI√ìN - 4FN</h2>
<h3>Cuarta Forma Normal (4FN): Sin dependencias multivaluadas no triviales</h3>
<table>
  <thead>
    <tr><th>Decisi√≥n</th><th>Tabla Afectada</th><th>Justificaci√≥n</th><th>Beneficio</th></tr>
  </thead>
  <tbody>
    <tr>
      <td>Relaciones M:N temporales con atributos</td>
      <td>guia_ruta</td>
      <td>Asigna gu√≠as a rutas con <code>fecha_asignacion</code>, <code>veces_realizada</code>, <code>esta_disponible</code></td>
      <td>Escalable; evita listas multivaluadas</td>
    </tr>
    <tr>
      <td>Idiomas por gu√≠a como M:N</td>
      <td>guia_idioma</td>
      <td>Permite m√∫ltiples idiomas por gu√≠a sin multivaluados</td>
      <td>Consistencia y filtrado por estado</td>
    </tr>
    <tr>
      <td>Etiquetas por bicicleta con temporalidad</td>
      <td>bicicleta_etiqueta</td>
      <td>Relaci√≥n M:N con <code>fecha_asignacion</code> y <code>fecha_eliminacion</code></td>
      <td>Hist√≥rico claro y no redundante</td>
    </tr>
    <tr>
      <td>Estados temporales</td>
      <td>estado_operativo, estado_fisico</td>
      <td>Historial con <code>fecha_inicio</code>, <code>fecha_fin</code></td>
      <td>Coherencia temporal y auditor√≠a</td>
    </tr>
    <tr>
      <td>Horarios y excepciones normalizados</td>
      <td>detalle_dia_horario, excepcion_horario</td>
      <td>Evita multivaluados en rangos horarios</td>
      <td>Control operacional</td>
    </tr>
  </tbody>
</table>

<hr>
<h2>PARTE 5: DECISIONES DE NORMALIZACI√ìN - NUEVOS CAMBIOS (v6.0)</h2>
<h3>Integraciones tur√≠sticas, legales e internacionalizaci√≥n</h3>
<table>
  <thead>
    <tr><th>Decisi√≥n</th><th>Tabla Afectada</th><th>Justificaci√≥n</th><th>Alternativa Considerada</th></tr>
  </thead>
  <tbody>
    <tr>
      <td>Legal: versionado de t√©rminos</td>
      <td>terminos_condiciones</td>
      <td>Versionar y no duplicar texto; referencia desde persona</td>
      <td>Texto legal embebido en persona (rechazada)</td>
    </tr>
    <tr>
      <td>Turismo: rutas como cat√°logo transaccional</td>
      <td>ruta_turistica</td>
      <td>Entidad dedicada; evita duplicaci√≥n en rese√±as/asignaciones</td>
      <td>Rutas embebidas en rese√±as (rechazada)</td>
    </tr>
    <tr>
      <td>Gu√≠as con rol propio</td>
      <td>guia_turistico</td>
      <td>Separaci√≥n de persona; atributos espec√≠ficos de gu√≠as</td>
      <td>Fusionar con cliente/persona (rechazada)</td>
    </tr>
    <tr>
      <td>Internacionalizaci√≥n con cat√°logo ISO</td>
      <td>idioma</td>
      <td>Est√°ndares ISO y asignaciones via M:N</td>
      <td>Texto libre de idiomas (rechazada)</td>
    </tr>
    <tr>
      <td>Rese√±as normalizadas</td>
      <td>resenia_ruta, foto_resenia</td>
      <td>Evita multivaluados y mezcla de responsabilidades</td>
      <td>Campos de rese√±a en reserva (rechazada)</td>
    </tr>
    <tr>
      <td>Capacidad: evitar atributos derivados persistidos</td>
      <td>capacidad</td>
      <td>Promover c√°lculo de ocupaci√≥n en vistas; minimizar persistencia de derivados</td>
      <td>Persistir <code>porcentaje_ocupacion</code>, <code>bicicletas_ocupadas</code> (restringido)</td>
    </tr>
  </tbody>
</table>

<hr>
<h2>PARTE 6: MATRIZ DE NORMALIZACI√ìN POR TABLA</h2>
<table>
  <thead>
    <tr><th>Tabla</th><th>1FN</th><th>2FN</th><th>3FN</th><th>4FN</th><th>Recomendada</th><th>Justificaci√≥n</th></tr>
  </thead>
  <tbody>
    <tr><td><strong>pais</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>N/A</td><td><strong>3FN</strong></td><td>Cat√°logo simple</td></tr>
    <tr><td><strong>ciudad</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>N/A</td><td><strong>3FN</strong></td><td>Cat√°logo con FK</td></tr>
    <tr><td><strong>persona</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>N/A</td><td><strong>3FN</strong></td><td>Rol base; referencia a t√©rminos</td></tr>
    <tr><td><strong>cliente</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>N/A</td><td><strong>3FN</strong></td><td>Separado de persona</td></tr>
    <tr><td><strong>administrador</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>N/A</td><td><strong>3FN</strong></td><td>Auditor√≠a y trazabilidad</td></tr>
    <tr><td><strong>terminos_condiciones</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>N/A</td><td><strong>3FN</strong></td><td>Versionado legal</td></tr>
    <tr><td><strong>ruta_turistica</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td><strong>4FN</strong></td><td>Relaci√≥n con gu√≠as y rese√±as</td></tr>
    <tr><td><strong>guia_turistico</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>N/A</td><td><strong>3FN</strong></td><td>Rol y atributos propios</td></tr>
    <tr><td><strong>guia_ruta</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td><strong>4FN</strong></td><td>M:N con temporalidad</td></tr>
    <tr><td><strong>resenia_ruta</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td><strong>4FN</strong></td><td>Evita multivaluados y transitivas</td></tr>
    <tr><td><strong>foto_resenia</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td><strong>4FN</strong></td><td>Asociativa de im√°genes</td></tr>
    <tr><td><strong>idioma</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>N/A</td><td><strong>3FN</strong></td><td>Cat√°logo ISO</td></tr>
    <tr><td><strong>guia_idioma</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td><strong>4FN</strong></td><td>M:N por gu√≠a e idioma</td></tr>
    <tr><td><strong>punto_alquiler</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>N/A</td><td><strong>3FN</strong></td><td>Entidad transaccional</td></tr>
    <tr><td><strong>detalle_dia_horario</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td><strong>4FN</strong></td><td>Rangos horarios normalizados</td></tr>
    <tr><td><strong>excepcion_horario</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td><strong>4FN</strong></td><td>Excepciones por fecha</td></tr>
    <tr><td><strong>servicio</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>N/A</td><td><strong>3FN</strong></td><td>Cat√°logo</td></tr>
    <tr><td><strong>punto_servicio</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td><strong>4FN</strong></td><td>Asignaci√≥n M:N</td></tr>
    <tr><td><strong>bicicleta</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>N/A</td><td><strong>3FN</strong></td><td>Entidad central</td></tr>
    <tr><td><strong>capacidad</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚ö†Ô∏è</td><td>‚ö†Ô∏è</td><td><strong>3FN</strong></td><td>Evitar persistir derivados (usar vistas)</td></tr>
    <tr><td><strong>capacidad_tipo</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>N/A</td><td><strong>3FN</strong></td><td>Detalle por tipo</td></tr>
    <tr><td><strong>reserva</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td><strong>4FN</strong></td><td>Separaci√≥n de descuentos y detalle</td></tr>
    <tr><td><strong>detalle_alquiler</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td><strong>4FN</strong></td><td>Evita multivaluados</td></tr>
    <tr><td><strong>fotografia</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>N/A</td><td><strong>3FN</strong></td><td>Metadatos normalizados</td></tr>
    <tr><td><strong>fotografia_bicicleta</strong></td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td><strong>4FN</strong></td><td>Asociaci√≥n con vista/tipo</td></tr>
  </tbody>
</table>

<hr>
<h2>üìò Conclusi√≥n</h2>
<p>
El modelo l√≥gico BICI-GO v6.0 mantiene el cumplimiento de las formas normales hasta 4FN en las entidades cr√≠ticas, integrando m√≥dulos de turismo (rutas, gu√≠as, rese√±as), legal (t√©rminos) e internacionalizaci√≥n (idiomas).<br>
Se refuerzan la trazabilidad, la coherencia temporal y la separaci√≥n de responsabilidades mediante cat√°logos, tablas asociativas M:N y tablas hist√≥ricas.<br>
Se recomienda minimizar la persistencia de atributos derivados (por ejemplo, ocupaci√≥n en capacidad) y consolidar su c√°lculo en vistas o procedimientos controlados para preservar la normalizaci√≥n.<br>
Este dise√±o est√° preparado para escalar funcionalidades sin comprometer la integridad referencial y sem√°ntica del sistema.
</p>

<blockquote>
  <p><strong>Versi√≥n:</strong> 6.0<br>
  <strong>Rol responsable:</strong> Dise√±ador L√≥gico<br>
  <strong>Sistema:</strong> BICI-GO<br>
  <strong>Actualizaci√≥n:</strong> Noviembre de 2025</p>
</blockquote>
</body>
</html>
